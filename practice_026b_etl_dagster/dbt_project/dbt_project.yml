# dbt Project Configuration
#
# This file defines the dbt project: where models live, how they're materialized,
# and project-level settings.
#
# WHAT IS dbt?
#   dbt (data build tool) is a SQL-first transformation framework.
#   You write SELECT statements, and dbt handles:
#   - Creating/replacing tables or views
#   - Dependency resolution (ref('other_model') -> correct table name)
#   - Incremental materialization (only process new rows)
#   - Testing (not_null, unique, relationships)
#   - Documentation
#
#   Think of it as "make" for SQL: declare what you want, dbt figures out how.
#
# HOW dbt INTEGRATES WITH DAGSTER:
#   Dagster reads this project's manifest.json (generated by `dbt parse`) and creates
#   one Dagster asset per dbt model. Each model's ref() dependencies become asset edges.
#   When Dagster materializes a dbt asset, it runs `dbt run --select model_name`.

name: weather_analytics
version: "1.0.0"

profile: weather

model-paths: ["models"]
analysis-paths: ["analyses"]
test-paths: ["tests"]
seed-paths: ["seeds"]
macro-paths: ["macros"]
snapshot-paths: ["snapshots"]

clean-targets:
  - "target"
  - "dbt_packages"

# Default materialization: table (not view).
# Tables are better for analytics queries; views are better for staging.
models:
  weather_analytics:
    staging:
      +materialized: view
      +schema: public
    marts:
      +materialized: table
      +schema: public
